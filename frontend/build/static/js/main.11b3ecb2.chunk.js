(this.webpackJsonpinstagram=this.webpackJsonpinstagram||[]).push([[0],{10:function(e,t,a){e.exports={headerContainer:"Post_headerContainer__1Hiw4",active:"Post_active__7jshc",verticalLine:"Post_verticalLine__3IREy",logo:"Post_logo__hKr0u",icons:"Post_icons__2ef1F",searchBar:"Post_searchBar__Qmi1O",searchContainer:"Post_searchContainer__2yM0Z",cardContainer:"Post_cardContainer__3Suvl",card:"Post_card__2giy2",smImg:"Post_smImg__DjTLr",cardUser:"Post_cardUser__2MyNK",cardImage:"Post_cardImage__3w1Mi",socialIcons:"Post_socialIcons__GIy2D",likeSection:"Post_likeSection__29p3y",addAComment:"Post_addAComment__3tfkq",inputAComment:"Post_inputAComment__1X3Qf",postAComment:"Post_postAComment__4hdDJ",desktop:"Post_desktop__27ERl","card-container":"Post_card-container__33FB8","card-image":"Post_card-image__LCudh"}},12:function(e,t,a){e.exports={profile:"Profile_profile__UpD-D",profileSection:"Profile_profileSection__3RqMu",avatar:"Profile_avatar__2MTYU",profileStats:"Profile_profileStats__ajYEv",firstRow:"Profile_firstRow__14F8_",userName:"Profile_userName__23L12",editBtn:"Profile_editBtn__1HfBK",followBtn:"Profile_followBtn__2swPQ",secondRow:"Profile_secondRow__3oHhw",followers:"Profile_followers__3s5Yb",postSection:"Profile_postSection__2YIdD",noPosts:"Profile_noPosts__3-YSc",post:"Profile_post__1An_L"}},14:function(e,t){t.constructDate=function(){var e=new Date,t=e.getFullYear(),a=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],n=e.getDate();return"".concat(n," ").concat(a," ").concat(t)}},18:function(e,t,a){e.exports={container:"Register_container__1eEta",branding:"Register_branding__4nVK4",inputContainer:"Register_inputContainer__wrmyr",redirection:"Register_redirection__3Ni-Y",error:"Register_error__3wmRO"}},20:function(e,t,a){e.exports={container:"Login_container__2c904",branding:"Login_branding__3kgM_",inputContainer:"Login_inputContainer__2Ff6z",redirection:"Login_redirection__9ZKDm",error:"Login_error__3mB13"}},3:function(e,t,a){e.exports={settings:"ProfileSettings_settings__lsqw0",sideBar:"ProfileSettings_sideBar__1J2FE",editProfile:"ProfileSettings_editProfile__2tPD_",changePassword:"ProfileSettings_changePassword__3ymp7",profile:"ProfileSettings_profile__2C88o",avatarContainer:"ProfileSettings_avatarContainer__18vFY",avatar:"ProfileSettings_avatar__3yJ3A",nameUser:"ProfileSettings_nameUser__1hewI",bio:"ProfileSettings_bio__1Kh2r",name:"ProfileSettings_name__Ke6mr",userName:"ProfileSettings_userName__OxeVb",phone:"ProfileSettings_phone__pdtBt",email:"ProfileSettings_email__gUHOm",gender:"ProfileSettings_gender__37SGv",password:"ProfileSettings_password__3rB0T",submitBtn:"ProfileSettings_submitBtn__3qeNJ",passwordBtn:"ProfileSettings_passwordBtn__3Fq-C",active:"ProfileSettings_active__2c2zW",hidden:"ProfileSettings_hidden__3gH-J",error:"ProfileSettings_error__3_tJv",passwordError:"ProfileSettings_passwordError__3VXmZ"}},43:function(e,t,a){e.exports=a(73)},48:function(e,t,a){},5:function(e,t,a){e.exports={invisible:"Header_invisible__2D76R",overFlow:"Header_overFlow__2ZPcn",togglePost:"Header_togglePost__2OHuy",searchIcon:"Header_searchIcon__2pHLl",bold:"Header_bold__3kN7f",commDiv:"Header_commDiv__2RG1s",headerContainer:"Header_headerContainer__3xJ2r",active:"Header_active__2RAiC",verticalLine:"Header_verticalLine__3346A",logo:"Header_logo__7SHmh",icons:"Header_icons__1Sb7J",searchBar:"Header_searchBar__3IoM2",searchContainer:"Header_searchContainer__30Ui_",userLinkContainer:"Header_userLinkContainer__MWGRR",userLink:"Header_userLink__2TV8s",smImg:"Header_smImg__1Mjbc",userInfo:"Header_userInfo__1FUIX",fullName:"Header_fullName__2P6Kf",realName:"Header_realName__2ExG3",cardContainer:"Header_cardContainer__1NIBz",card:"Header_card__123PW",cardUser:"Header_cardUser__1HdKp",cardImage:"Header_cardImage__2tV5R",socialIcons:"Header_socialIcons__HScRK",likeSection:"Header_likeSection__1hhis",addAComment:"Header_addAComment__7hUUF",inputAComment:"Header_inputAComment__16l3h",background:"Header_background__2U4wf",btnContainer:"Header_btnContainer__2uiAN",postBtn:"Header_postBtn__2ZgmJ",cancelBtn:"Header_cancelBtn__1yDFx","card-container":"Header_card-container__3Mfya","card-image":"Header_card-image__1kAPw"}},55:function(e,t,a){e.exports={togglePost:"Feed_togglePost__1xqCp",searchIcon:"Feed_searchIcon__s4Fw8",bold:"Feed_bold__19IXC",commDiv:"Feed_commDiv__2Vs4_",headerContainer:"Feed_headerContainer__3IQYX",active:"Feed_active__22-9A",verticalLine:"Feed_verticalLine__1JTvb",logo:"Feed_logo__3WQjb",icons:"Feed_icons__1CnnF",searchBar:"Feed_searchBar__cL-uj",searchContainer:"Feed_searchContainer__2C-U9",cardContainer:"Feed_cardContainer__3kUpo",card:"Feed_card__2ACzi",smImg:"Feed_smImg__3WNwr",cardUser:"Feed_cardUser__26YI7",cardImage:"Feed_cardImage__OLZv4",socialIcons:"Feed_socialIcons__3HSSi",likeSection:"Feed_likeSection__3tzo8",addAComment:"Feed_addAComment__28yPZ",inputAComment:"Feed_inputAComment__12Jzr",background:"Feed_background__FFGwI",btnContainer:"Feed_btnContainer__35SH9",postBtn:"Feed_postBtn__1a1Xh",cancelBtn:"Feed_cancelBtn__1OvwY","card-container":"Feed_card-container__19qUU","card-image":"Feed_card-image__3HzKR"}},7:function(e,t,a){e.exports={bold:"Postcomment_bold___0rYb",commDiv:"Postcomment_commDiv__XcZPv",commLikes:"Postcomment_commLikes__1a6cW",smImg:"Postcomment_smImg__1kQlR",flex:"Postcomment_flex__3wyZn",replyBtn:"Postcomment_replyBtn__PCfMC",inputAComment:"Postcomment_inputAComment__15fcS",line:"Postcomment_line__18j-X",line2:"Postcomment_line2__1ePJb",container:"Postcomment_container__3Q746",btnGrp:"Postcomment_btnGrp__2FZSP",postCancelBtn:"Postcomment_postCancelBtn__3lrok",postReplyBtn:"Postcomment_postReplyBtn__3LaLj",viewReplies:"Postcomment_viewReplies__fQJAh",hideReplies:"Postcomment_hideReplies__ws6Fm"}},73:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(41),r=a.n(c),s=a(11),l=a(2),i=a(1),m=(a(48),a(6)),u=a(21),d=a.n(u),p=a(26),_=a(18),f=a.n(_),b=Object(n.createContext)({}),g=function(e){return fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e;console.log(e)}))},N=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),l=Object(i.a)(r,2),m=l[0],u=l[1],_=Object(n.useState)(""),N=Object(i.a)(_,2),v=N[0],h=N[1],E=Object(n.useState)(""),y=Object(i.a)(E,2),O=y[0],j=y[1],C=Object(n.useState)(!1),w=Object(i.a)(C,2),k=w[0],S=w[1],P=Object(n.useState)(!1),B=Object(i.a)(P,2),I=B[0],x=B[1],U=Object(n.useState)(!1),R=Object(i.a)(U,2),F=R[0],H=R[1],L=Object(n.useContext)(b),A=(L.user,L.setuser,function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),Array.prototype.forEach.call(t.target.elements,(function(e){e.value=""})),v!==O||""===v||""===O?H(!0):(H(!1),n={query:'mutation {\n        createUser(userInput: {\n          userName: "'.concat(m,'"\n          password: "').concat(v,'"\n          email: "').concat(a,'"\n          avatar: "test.jpg"\n          followedBy: []\n          following: []\n          bio: ""\n          gender: ""\n          phoneNumber: ""\n          fullName: "asd"\n        })\n        {\n          _id\n        }\n      }')},g(n).then((function(e){return e.json().then((function(e){console.log(e),e?window.location.href="/login":(console.log(e.errors[0].message),e.errors[0].message.includes("Email")?(x(!0),S(!1)):(S(!0),x(!1)))})).catch((function(e){console.log(e)}))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return o.a.createElement("div",null,o.a.createElement("div",{className:f.a.container},o.a.createElement("h1",{className:f.a.branding},"Instagram"),o.a.createElement("p",null,"Sign up to see photos and videos from your friends."),o.a.createElement("form",{action:"",onSubmit:A},o.a.createElement("div",{className:f.a.inputContainer},o.a.createElement("span",null,"Please enter your email"),o.a.createElement("input",{type:"email",name:"email",id:"registerEmail",onInput:function(e){c(e.target.value)}})),I?o.a.createElement("span",{className:f.a.error},"This email address is already taken"):null,o.a.createElement("div",{className:f.a.inputContainer},o.a.createElement("span",null,"enter username"),o.a.createElement("input",{type:"text",name:"username",id:"registerUsername",onInput:function(e){u(e.target.value)}})),k?o.a.createElement("span",{className:f.a.error},"This Username is already taken"):null,o.a.createElement("div",{className:f.a.inputContainer},o.a.createElement("span",null,"enter password"),o.a.createElement("input",{type:"password",name:"password",id:"registerPassword",onInput:function(e){h(e.target.value)}})),o.a.createElement("div",{className:f.a.inputContainer},o.a.createElement("span",null,"repeat password"),o.a.createElement("input",{type:"password",name:"rpassword",id:"registerRPassword",onInput:function(e){j(e.target.value)}})),F?o.a.createElement("span",{className:f.a.error},"Please check if you entered the password correctly"):null,o.a.createElement("button",{type:"click",id:"registerSubmitBtn"},"Sign Up"))),o.a.createElement("div",{className:f.a.redirection},"Have an account? ",o.a.createElement(s.b,{to:"/login"},"Log in")))},v=a(20),h=a.n(v),E=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),l=Object(i.a)(r,2),m=l[0],u=l[1],_=Object(n.useState)(""),f=Object(i.a)(_,2),b=f[0],N=f[1],v=function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),Array.prototype.forEach.call(t.target.elements,(function(e){e.value=""})),n={query:'query{\n  login(email: "'.concat(a,'", password: "').concat(b,'")\n  {\n    userId\n    token\n  }\n}')},g(n).then((function(e){return e.json()})).then((function(e){null===e.data.login?u(!0):(localStorage.setItem("token",JSON.stringify(e.data.login)),window.location.href="https://copygram-3f03b.web.app/")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return console.log("testing"),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:h.a.container},o.a.createElement("h1",{className:h.a.branding},"Instagram"),o.a.createElement("form",{action:"",onSubmit:v},o.a.createElement("div",{className:h.a.inputContainer},o.a.createElement("span",null,"Please enter your email"),o.a.createElement("input",{type:"email",name:"email",id:"loginEmail",onInput:function(e){c(e.target.value)}})),o.a.createElement("div",{className:h.a.inputContainer},o.a.createElement("span",null,"enter password"),o.a.createElement("input",{type:"password",name:"password",id:"loginPassword",onInput:function(e){N(e.target.value)}})),m?o.a.createElement("span",{className:h.a.error},"Incorrect email or password."):null,o.a.createElement("button",{type:"click",id:"loginSubmitBtn"},"Log In"))),o.a.createElement("div",{className:h.a.redirection},"Don't have an account? ",o.a.createElement(s.b,{to:"/register"},"Register")))},y=(a(55),a(23)),O=a.n(y),j=a(4),C=a(10),w=a.n(C),k=a(7),S=a.n(k),P=a(9),B=a.n(P),I=a(14),x=Object(n.createContext)([]),U=Object(n.createContext)({}),R=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(!1),m=Object(i.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(!1),_=Object(i.a)(p,2),f=_[0],N=_[1],v=Object(n.useState)(""),h=Object(i.a)(v,2),E=h[0],y=h[1],O=Object(n.useContext)(b),C=O.user,w=(O.setuser,Object(n.useContext)(x)),k=w.posts,S=(w.setposts,Object(n.useContext)(U)),P=S.users,R=(S.setusers,o.a.createRef());Object(n.useEffect)((function(){var t=Object(l.a)(e.reply.likedBy).includes(C._id);r(!!t)}),[P]);return o.a.createElement("div",{className:B.a.comments},o.a.createElement("div",{className:B.a.commDiv},o.a.createElement("div",{className:B.a.flex},o.a.createElement("img",{src:"images/avatars/".concat(C.avatar),alt:"",className:B.a.smImg}),o.a.createElement("div",{className:B.a.comment},o.a.createElement("span",{className:B.a.bold},e.reply.poster.userName),o.a.createElement("span",{className:B.a.commCaption},e.reply.caption))),c?o.a.createElement("span",{className:B.a.comLikeButton},o.a.createElement("i",{className:"fas fa-heart",onClick:function(){var t=Object(j.a)({},e.post),a=Object(j.a)({},e.comment),n=Object(l.a)(e.comments),o=a.replies[e.replyIndex].likedBy.filter((function(e){return e._id!==e._id}));a.replies[e.replyIndex].likedBy=o,n[e.commentIndex]=a,t.comments=n;var c=Object(l.a)(k);c[e.index]=t;var s=JSON.stringify(o),i={query:'\n      mutation {\n        replyUpdate(replyUpdateInput: {\n          id: "'.concat(e.reply._id,'"\n          likedBy: ').concat(s,"\n        }) \n        \n         {\n          _id\n        }\n      }\n      ")};r(!1),g(i).then((function(t){t&&e.setposted(c)}))}})):o.a.createElement("span",{className:B.a.comLikeButton},o.a.createElement("i",{className:"far fa-heart",onClick:function(){var t=Object(j.a)({},e.post),a=Object(j.a)({},e.comment),n=Object(l.a)(e.comments);a.replies[e.replyIndex].likedBy=[].concat(Object(l.a)(a.replies[e.replyIndex].likedBy),[C._id]),n[e.commentIndex]=a,t.comments=n;var o=JSON.stringify(a.replies[e.replyIndex].likedBy),c=Object(l.a)(k);c[e.index]=t;var s={query:'\n      mutation {\n        replyUpdate(replyUpdateInput: {\n          id: "'.concat(e.reply._id,'"\n          likedBy: ').concat(o,"\n        }) \n        \n         {\n          _id\n        }\n      }\n      ")};r(!0),g(s).then((function(t){t&&e.setposted(c)}))}}))),o.a.createElement("span",{className:B.a.commLikes},e.reply.likedBy.length," likes"),o.a.createElement("span",{className:B.a.replyBtn,onClick:function(){d(!0)}},"reply"),u?o.a.createElement("div",{className:B.a.container},o.a.createElement("input",{className:B.a.inputAComment,type:"text",placeholder:"Add a public reply...",onChange:function(e){y(e.target.value)},name:"commentInput",onFocus:function(){N(!0)},onBlur:function(){N(!1)},ref:R}),o.a.createElement("div",{className:f?B.a.line2:B.a.line}),o.a.createElement("div",{className:B.a.btnGrp},o.a.createElement("div",{className:B.a.postCancelBtn,onClick:function(){d(!1)}},"CANCEL"),o.a.createElement("div",{className:B.a.postReplyBtn,onClick:function(){var t={caption:"@".concat(e.comment.poster.userName," ").concat(E),poster:C._id,likedBy:[],comment:e.comment._id,date:Object(I.constructDate)()};console.log("asd");var a={query:'mutation {\n        createReply(replyInput: {\n          caption: "@'.concat(e.comment.poster.userName," ").concat(E,'"\n          poster: "').concat(C._id,'"\n          likedBy: []\n          comment: "').concat(e.comment._id,'"\n          date: "').concat(Object(I.constructDate)(),'"\n        })\n        {\n          _id\n        }\n      }')},n=Object(l.a)(k),o=[].concat(Object(l.a)(e.comment.replies),[t]),c=Object(j.a)({},e.post);c.comments[e.commentIndex].replies=o,n[e.index]=c,g(a).then((function(t){t&&e.setposted(n)})),R.current.value=""}},"POST"))):null)},F=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(!1),m=Object(i.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(!1),_=Object(i.a)(p,2),f=_[0],N=_[1],v=Object(n.useState)(""),h=Object(i.a)(v,2),E=h[0],y=h[1],O=Object(n.useState)([]),C=Object(i.a)(O,2),w=C[0],k=C[1],P=Object(n.useState)(!1),B=Object(i.a)(P,2),U=B[0],F=B[1],H=Object(n.useState)(Number),L=Object(i.a)(H,2),A=(L[0],L[1],o.a.createRef()),J=Object(n.useContext)(b),q=J.user,D=(J.setuser,Object(n.useContext)(x)),T=D.posts,M=D.setposts;Object(n.useEffect)((function(){var t=Object(l.a)(e.comment.likedBy).includes("".concat(q._id));r(!!t)}),[]),Object(n.useEffect)((function(){k(e.comment.replies)}),[T]);var G=function(){F(!0)},Y=function(){F(!1)};return o.a.createElement("div",{className:S.a.comments},o.a.createElement("div",{className:S.a.commDiv},o.a.createElement("div",{className:S.a.flex},o.a.createElement("img",{src:"images/avatars/".concat(q.avatar),alt:"",className:S.a.smImg}),o.a.createElement("div",{className:S.a.comment},o.a.createElement("span",{className:S.a.bold},e.comment.poster.userName),o.a.createElement("span",{className:S.a.commCaption},e.comment.caption))),c?o.a.createElement("span",{className:S.a.comLikeButton},o.a.createElement("i",{className:"fas fa-heart",onClick:function(){var t=Object(j.a)({},e.post),a=Object(j.a)({},e.comment),n=Object(l.a)(e.comments),o=a.likedBy.filter((function(e){return e._id!==e._id}));a.likedBy=o,n[e.commentIndex]=a,t.comments=n;var c=JSON.stringify(o),s=Object(l.a)(e.posts);s[e.index]=t;var i={query:'mutation {\n        commentUpdate(commentUpdateInput: {\n          id: "'.concat(e.comment._id,'"\n          likedBy: ').concat(c,"\n\n        })\n        {\n          _id\n        }\n      }")};r(!1),g(i).then((function(t){t&&(e.setposted(s),M(s))}))}})):o.a.createElement("span",{className:S.a.comLikeButton},o.a.createElement("i",{className:"far fa-heart",onClick:function(){var t=Object(j.a)({},e.post),a=Object(j.a)({},e.comment),n=Object(l.a)(e.comments);a.likedBy=[].concat(Object(l.a)(a.likedBy),[q._id]),n[e.commentIndex]=a,t.comments=n;var o=JSON.stringify(a.likedBy),c=Object(l.a)(e.posts);c[e.index]=t;var s={query:'mutation {\n        commentUpdate(commentUpdateInput: {\n          id: "'.concat(e.comment._id,'"\n          likedBy: ').concat(o,"\n\n        })\n        {\n          _id\n        }\n      }")};r(!0),g(s).then((function(t){t&&(M(c),e.setposted(c))}))}}))),o.a.createElement("span",{className:S.a.commLikes},e.comment.likedBy.length," likes"),o.a.createElement("span",{className:S.a.replyBtn,onClick:function(){d(!0)}},"reply"),e.comment.replies.length>=1?U?o.a.createElement("div",{className:S.a.hideReplies,onClick:Y},"Hide ".concat(e.comment.replies.length," replies")):o.a.createElement("div",{className:S.a.viewReplies,onClick:G},"View ".concat(e.comment.replies.length," replies")):null,u?o.a.createElement("div",{className:S.a.container},o.a.createElement("input",{className:S.a.inputAComment,type:"text",placeholder:"Add a public reply...",onChange:function(e){y(e.target.value)},name:"commentInput",onFocus:function(){N(!0)},onBlur:function(){N(!1)},ref:A}),o.a.createElement("div",{className:f?S.a.line2:S.a.line}),o.a.createElement("div",{className:S.a.btnGrp},o.a.createElement("div",{className:S.a.postCancelBtn,onClick:function(){d(!1)}},"CANCEL"),o.a.createElement("div",{className:S.a.postReplyBtn,onClick:function(){var t={caption:"@".concat(e.comment.poster.userName," ").concat(E),poster:q._id,likedBy:[],comment:e.comment._id,date:Object(I.constructDate)()},a={query:'mutation {\n        createReply(replyInput: {\n          caption: "@'.concat(e.comment.poster.userName," ").concat(E,'"\n          poster: "').concat(q._id,'"\n          likedBy: []\n          comment: "').concat(e.comment._id,'"\n          date: "').concat(Object(I.constructDate)(),'"\n        })\n        {\n          _id\n        }\n      }')},n=[].concat(Object(l.a)(e.comment.replies),[t]),o=Object(j.a)({},e.post);o.comments[e.commentIndex].replies=n;var c=Object(l.a)(e.posts);c[e.index]=o,g(a).then((function(t){t&&e.setposted(c)})),A.current.value=""}},"POST"))):null,w.map((function(t,a){return function(t,a){return U?o.a.createElement(R,{key:a,comment:e.comment,commentIndex:e.commentIndex,reply:t,replyIndex:a,post:e.post,comments:e.comments,setcomments:e.setcomments,commentReplies:w,setcommentReplies:k,setposted:e.setposted}):null}(t,a)})))},H=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(""),m=Object(i.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(!1),_=Object(i.a)(p,2),f=_[0],N=_[1],v=Object(n.useState)({}),h=Object(i.a)(v,2),E=h[0],y=h[1],O=Object(n.useContext)(b),C=O.user,k=(O.setuser,Object(n.useContext)(x)),S=k.posts,P=k.setposts,B=o.a.createRef();Object(n.useEffect)((function(){r(e.post.comments),y(e.post);var t=Object(l.a)(e.post.likedBy).includes("".concat(C._id));N(!!t)}),[S]);return o.a.createElement("section",{className:w.a.cardContainer},o.a.createElement("div",{className:w.a.card},o.a.createElement("div",{className:w.a.cardUser},o.a.createElement("img",{src:"images/avatars/".concat(C.avatar),alt:"",className:w.a.smImg}),o.a.createElement("div",{className:w.a.cardUsername},e.post.poster.userName?e.post.poster.userName:null)),o.a.createElement("img",{src:"images/postpics/".concat(e.post.picture),alt:"",className:w.a.cardImage}),o.a.createElement("div",{className:w.a.commentSection},o.a.createElement("div",{className:w.a.socialIcons},o.a.createElement("div",null,f?o.a.createElement("span",{className:w.a.likeButton},o.a.createElement("i",{className:"fas fa-heart",onClick:function(){N(!1);var t=Object(j.a)({},E),a=t.likedBy.filter((function(e){return e._id!==e._id})),n=Object(l.a)(S);n[e.index]=t,t.likedBy=a;var o=JSON.stringify(a),c={query:'mutation {\n        postUpdate(postUpdateInput: {\n          id: "'.concat(e.post._id,'",\n          likedBy: ').concat(o,"\n        })\n        {\n          _id\n        }\n      }")};g(c).then((function(t){t&&(P(n),e.setposted(n))}))}})):o.a.createElement("span",{className:w.a.likeButton},o.a.createElement("i",{className:"far fa-heart",onClick:function(){N(!0);var t=Object(j.a)({},e.post),a=[].concat(Object(l.a)(e.post.likedBy),[C._id]);t.likedBy=a;var n=Object(l.a)(e.posts);n[e.index]=t;var o=JSON.stringify(a),c={query:'mutation {\n        postUpdate(postUpdateInput: {\n          id: "'.concat(e.post._id,'",\n          likedBy: ').concat(o,"\n        })\n        {\n          _id\n        }\n      }")};g(c).then((function(t){t&&(P(n),e.setposted(n))}))}})),o.a.createElement("span",{className:w.a.commentButton},o.a.createElement("i",{className:"far fa-comment"}))),o.a.createElement("i",{className:"far fa-bookmark"}))),o.a.createElement("div",{className:w.a.likeSection},o.a.createElement("span",{className:w.a.counter}," ",e.post.likedBy.length," likes")),e.post.comments.map((function(t,a){return o.a.createElement(F,{key:a,comment:t,comments:c,post:e.post,index:e.index,posts:e.posts,setposts:e.setposts,commentIndex:a,setcomments:r,setposted:e.setposted})})),o.a.createElement("div",{className:w.a.addAComment},o.a.createElement("input",{className:w.a.inputAComment,type:"text",placeholder:"Add a comment...",onChange:function(e){d(e.target.value)},name:"commentInput",ref:B}),o.a.createElement("div",{className:w.a.postAComment,onClick:function(){var t={caption:u,poster:C._id,likedBy:[],post:e.post._id,date:Object(I.constructDate)(),replies:[]},a=[].concat(Object(l.a)(e.post.comments),[t]),n=Object(j.a)({},e.post);n.comments=a;var o=Object(l.a)(S);o[e.index]=n;var c={query:'mutation {\n        createComment(commentInput: {\n          caption: "'.concat(u,'"\n          poster: "').concat(C._id,'"\n          likedBy: []\n          post: "').concat(e.post._id,'"\n          date: "').concat(Object(I.constructDate)(),'"\n          \n        })\n        {\n          _id\n        }\n      }')};g(c).then((function(t){t&&(e.setposted(o),P(o),e.setposted(o))})),B.current.value=""}},"Post"),o.a.createElement("div",{className:w.a.line}))))},L=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=(a[0],a[1],Object(n.useState)("")),r=Object(i.a)(c,2),s=(r[0],r[1],Object(n.useState)({})),l=Object(i.a)(s,2),m=(l[0],l[1],Object(n.useContext)(U)),u=(m.users,m.setusers,Object(n.useContext)(b)),d=(u.user,u.setuser,Object(n.useContext)(x)),p=d.posts,_=d.setposts,f=Object(n.useState)(0),g=Object(i.a)(f,2),N=(g[0],g[1]),v=Object(n.useState)(1),h=Object(i.a)(v,2);h[0],h[1];return Object(n.useEffect)((function(){}),[]),o.a.createElement(o.a.Fragment,null,p.length>0?p.map((function(t,a){return o.a.createElement(H,{users:e.users,setusers:e.setusers,post:t,posts:p,setposts:_,index:a,key:a,setposted:e.setposted,posted:e.posted,setpostposted:N})})):null)},A=a(12),J=a.n(A),q=function(e){var t=Object(n.useContext)(b),a=t.user,c=t.setuser,r=Object(n.useState)(!1),m=Object(i.a)(r,2),u=m[0],d=m[1];Object(n.useEffect)((function(){var t=e.profileUser.followedBy.includes(a._id);d(!!t)}),[]);return o.a.createElement("div",null,o.a.createElement("div",{className:J.a.profile},o.a.createElement("div",{className:J.a.profileSection},o.a.createElement("img",{className:J.a.avatar,src:"images/avatars/".concat(e.profileUser.avatar),alt:"#"}),o.a.createElement("div",{className:J.a.profileStats},o.a.createElement("div",{className:J.a.firstRow},o.a.createElement("span",{className:J.a.userName},e.profileUser.userName),o.a.createElement(s.b,{to:"/AccountSettings"},o.a.createElement("div",{className:J.a.editBtn},"Edit Profile")),a._id!==e.profileUser._id?u?o.a.createElement("div",{className:J.a.followBtn,onClick:function(){var t=Object(j.a)({},a),n=Object(j.a)({},e.profileUser);t.following=t.following.filter((function(e){return e!==n._id}));var o=JSON.stringify(Object(l.a)(t.following)),r=JSON.stringify(Object(l.a)(t.followedBy)),s={query:'\n      mutation {\n        userUpdate(userUpdateInput: {\n          id: "'.concat(t._id,'"\n          followedBy: ').concat(r,"\n          following: ").concat(o,'\n          phoneNumber: "').concat(t.phoneNumber,'"\n          gender: "').concat(t.gender,'"\n          bio: "').concat(t.bio,'"\n          userName: "').concat(t.userName,'"\n          email: "').concat(t.email,'"\n          fullName: "').concat(t.fullName,'"\n        })\n        {\n          _id\n        }\n      }\n      ')};fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then((function(a){if(a.ok)return c(t),e.setposted(t),a.json();console.log(a)}));var i=Object(l.a)(e.users);n.followedBy=n.followedBy.filter((function(e){return e!==t._id})),i[e.profileIndex]=n;var m=JSON.stringify(Object(l.a)(n.followedBy)),u=JSON.stringify(Object(l.a)(n.following));s={query:'\n      mutation {\n        userUpdate(userUpdateInput: {\n          id: "'.concat(n._id,'"\n          followedBy: ').concat(m,"\n          following: ").concat(u,'\n          phoneNumber: "').concat(n.phoneNumber,'"\n          gender: "').concat(n.gender,'"\n          bio: "').concat(n.bio,'"\n          userName: "').concat(n.userName,'"\n          email: "').concat(n.email,'"\n          fullName: "').concat(n.fullName,'"\n        })\n        {\n          _id\n        }\n      }\n      ')},fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then((function(a){if(a.ok)return e.setusers(i),d(!1),e.setposted(t),a.json();console.log(a)}))}}," ","Unfollow"," "):o.a.createElement("div",{className:J.a.followBtn,onClick:function(){var t=Object(j.a)({},a),n=Object(j.a)({},e.profileUser);t.following=[].concat(Object(l.a)(t.following),[n._id]);var o=JSON.stringify(Object(l.a)(t.following)),r=JSON.stringify(Object(l.a)(t.followedBy)),s={query:'\n      mutation {\n        userUpdate(userUpdateInput: {\n          id: "'.concat(t._id,'"\n          followedBy: ').concat(r,"\n          following: ").concat(o,'\n          phoneNumber: "').concat(t.phoneNumber,'"\n          gender: "').concat(t.gender,'"\n          bio: "').concat(t.bio,'"\n          userName: "').concat(t.userName,'"\n          email: "').concat(t.email,'"\n          fullName: "').concat(t.fullName,'"\n        })\n        {\n          _id\n        }\n      }\n      ')};fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then((function(a){if(a.ok)return c(t),e.setposted(t),a.json();console.log(a)}));var i=Object(l.a)(e.users);n.followedBy=[].concat(Object(l.a)(n.followedBy),[t._id]),i[e.profileIndex]=n;var m=JSON.stringify(Object(l.a)(n.followedBy)),u=JSON.stringify(Object(l.a)(n.following));s={query:'\n      mutation {\n        userUpdate(userUpdateInput: {\n          id: "'.concat(n._id,'"\n          followedBy: ').concat(m,"\n          following: ").concat(u,'\n          phoneNumber: "').concat(n.phoneNumber,'"\n          gender: "').concat(n.gender,'"\n          bio: "').concat(n.bio,'"\n          userName: "').concat(n.userName,'"\n          email: "').concat(n.email,'"\n          fullName: "').concat(n.fullName,'"\n        })\n        {\n          _id\n        }\n      }\n      ')},fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then((function(a){if(a.ok)return e.setusers(i),d(!0),e.setposted(t),a.json();console.log(a)}))}}," ","Follow"," "):null),o.a.createElement("div",{className:J.a.secondRow},o.a.createElement("span",null,e.profileUser.posts.length," posts"),o.a.createElement("span",{className:J.a.followers},e.profileUser.followedBy.length," followers"),o.a.createElement("span",null,e.profileUser.following.length," following")))),o.a.createElement("div",{className:J.a.postSection},e.profileUser.posts.length>0?e.profileUser.posts.map((function(e,t){return o.a.createElement("img",{key:t,className:J.a.post,src:"images/postpics/".concat(e.picture)})})):o.a.createElement("div",{className:J.a.noPosts}," You currently have no posts "))))},D=a(27),T=a(3),M=a.n(T),G=function(e){var t=Object(n.useContext)(b),a=t.user,c=t.setuser,r=Object(n.useContext)(U),s=r.users,m=r.setusers,u=Object(n.useState)({}),d=Object(i.a)(u,2),p=d[0],_=d[1],f=Object(n.useContext)(x),N=(f.posts,f.setposts,Object(n.useState)(!0)),v=Object(i.a)(N,2),h=v[0],E=v[1],y=Object(n.useState)(!1),C=Object(i.a)(y,2),w=C[0],k=C[1],S=Object(n.useState)(!1),P=Object(i.a)(S,2),B=P[0],I=P[1],R=Object(n.useState)(""),F=Object(i.a)(R,2),H=F[0],L=F[1],A=Object(n.useState)(!1),J=Object(i.a)(A,2),q=J[0],T=J[1],G=o.a.createRef(),Y=o.a.createRef(),V=o.a.createRef(),K=o.a.createRef(),Z=o.a.createRef(),Q=o.a.createRef(),X=o.a.createRef(),z=o.a.createRef(),W=o.a.createRef(),$=o.a.createRef();Object(n.useEffect)((function(){null===JSON.parse(localStorage.getItem("token"))&&(window.location.href="http://localhost:3000/login")}),[]);var ee=function(e){_(Object(j.a)(Object(j.a)({},p),{},Object(D.a)({},e.target.name,e.target.value)))},te=function(t){var n=new FormData;n.append("file",t.target.files[0]),O.a.post("http://localhost:8000/upload2",n,{}).then((function(e){}));var o=Object(j.a)({},a);o.avatar=t.target.files[0].name;var r=Object(l.a)(e.users),s=e.users.findIndex((function(e){return a._id===e._id}));r[s]=o;var i={query:'\n      mutation {\n        avatarUpdate(userAvatarUpdateInput:{\n          id: "'.concat(a._id,'"\n          avatar: "').concat(t.target.files[0].name,'"\n        })\n        {\n          _id\n        }\n        }\n      ')};g(i).then((function(e){e&&(m(r),c(o))}))};return o.a.createElement("div",null,o.a.createElement("div",{className:M.a.settings},o.a.createElement("div",{className:M.a.sideBar},o.a.createElement("div",{className:"".concat(M.a.editProfile," ").concat(h?M.a.active:null),onClick:function(){E(!0),T(!1)}},"Edit Profile"),o.a.createElement("div",{className:"".concat(M.a.changePassword," ").concat(q?M.a.active:null),onClick:function(){T(!0),E(!1)}},"Change Password")),h?o.a.createElement("form",{className:M.a.profile},o.a.createElement("div",{className:M.a.avatarContainer},o.a.createElement("div",{className:M.a.avatar,onClick:function(){G.current.click()}},o.a.createElement("img",{src:"images/avatars/".concat(a.avatar),alt:""}),o.a.createElement("input",{type:"file",name:"avatar",id:"avatar",onChange:te,ref:G,className:M.a.hidden})),o.a.createElement("span",{className:M.a.nameUser},p.name?p.name:a.fullName)),o.a.createElement("div",{className:M.a.name},o.a.createElement("label",{htmlFor:"name",onClick:function(){V.current.focus()}},"Name"),o.a.createElement("input",{type:"text",defaultValue:a.fullName,onChange:ee,name:"name",ref:V})),o.a.createElement("div",{className:M.a.userName},o.a.createElement("label",{htmlFor:"userName",onClick:function(){Y.current.focus()}},"Username"),o.a.createElement("input",{type:"text",defaultValue:a.userName,onChange:ee,name:"userName",ref:Y})),B?o.a.createElement("span",{className:M.a.error},"Username is already in use"):null,o.a.createElement("div",{className:M.a.bio},o.a.createElement("label",{htmlFor:"bio",onClick:function(){K.current.focus()}},"Bio"),o.a.createElement("input",{type:"text",defaultValue:a.bio,onChange:ee,name:"bio",ref:K})),o.a.createElement("div",{className:M.a.email},o.a.createElement("label",{htmlFor:"email",onClick:function(){Z.current.focus()}},"Email"),o.a.createElement("input",{type:"email",defaultValue:a.email,onChange:ee,name:"email",ref:Z})),w?o.a.createElement("span",{className:M.a.error},"Email is already in use"):null,o.a.createElement("div",{className:M.a.phone},o.a.createElement("label",{htmlFor:"phone",onClick:function(){Q.current.focus()}},"Phone Number"),o.a.createElement("input",{type:"text",defaultValue:a.phoneNumber,onChange:ee,name:"phone",ref:Q})),o.a.createElement("div",{className:M.a.gender},o.a.createElement("label",{htmlFor:"gender",onClick:function(){X.current.focus()}},"Gender"),o.a.createElement("input",{type:"text",defaultValue:a.gender,onChange:ee,name:"gender",ref:X})),o.a.createElement("span",{className:M.a.submitBtn,onClick:function(){var t="",n="",o="",c="",r="",i="",m=Object(l.a)(s),u=Object(j.a)({},a);n=p.userName?p.userName:a.userName?a.userName:"",t=p.name?p.name:a.fullName?a.fullName:"",o=p.bio?p.bio:a.bio?a.bio:"",c=p.phone?p.phone:a.phoneNumber?a.phoneNumber:"",i=p.email?p.email:a.email?a.email:"",r=p.gender?p.gender:a.gender?a.gender:"",u.userName=n,u.email=i,u.bio=o,u.gender=r,u.phoneNumber=c,u.fullName=t,m[e.users.findIndex((function(e){return a._id===e._id}))]=u;var d={query:'mutation {\n        userUpdate(userUpdateInput: {\n        \n        id: "'.concat(a._id,'"\n          phoneNumber: "').concat(c,'"\n          gender: "').concat(r,'"\n          bio:"').concat(o,'"\n          userName: "').concat(n,'"\n          email:"').concat(i,'"\n          followedBy: ').concat(JSON.stringify(a.followedBy),"\n          following: ").concat(JSON.stringify(a.following),'\n          fullName: "').concat(t,'"\n          \n        })\n        {\n          _id\n        }\n        }')};g(d).then((function(e){e.errors?(e.errors[0].message.includes("User")?I(!0):I(!1),e.errors[0].message.includes("Email")?k(!0):k(!1)):(k(!1),I(!1))}))}},"Submit")):null,q?o.a.createElement("form",{className:M.a.profile},o.a.createElement("div",{className:M.a.avatarContainer},o.a.createElement("div",{className:M.a.avatar,onClick:function(){G.current.click()}},o.a.createElement("img",{src:"images/avatars/".concat(a.avatar),alt:""}),o.a.createElement("input",{type:"file",name:"avatar",id:"avatar",onChange:te,ref:G,className:M.a.hidden})),o.a.createElement("span",{className:M.a.nameUser},p.name?p.name:a.fullName)),o.a.createElement("div",{className:M.a.userName},o.a.createElement("label",{htmlFor:"oldPass",onClick:function(){z.current.focus()}},"Old password"),o.a.createElement("input",{type:"password",onChange:ee,name:"oldPass",ref:z})),o.a.createElement("div",{className:M.a.userName},o.a.createElement("label",{htmlFor:"newPass",onClick:function(){W.current.focus()}},"New Password"),o.a.createElement("input",{type:"password",onChange:ee,name:"newPass",ref:W})),o.a.createElement("div",{className:M.a.password},o.a.createElement("label",{htmlFor:"rnewPass",onClick:function(){$.current.focus()}},"Repeat New Password"),o.a.createElement("input",{type:"password",onChange:ee,name:"rnewPass",ref:$})),o.a.createElement("span",{className:M.a.passwordBtn,onClick:function(){L(""),p.newPass.length<3?L("New password needs to be atleast 3 characters"):p.newPass!==p.rnewPass&&L("Please make sure you repeated the password correctly");var e={query:'\n      mutation {\n        passwordUpdate(userPassUpdateInput: {\n      \n        oldPass: "'.concat(p.oldPass,'"\n        newPass: "').concat(p.newPass,'"\n        id: "').concat(a._id,'"\n        })\n        {\n          _id\n        }\n      }\n      ')};g(e).then((function(e){e.errors&&(e.errors[0].message.includes("Old")?H("Old password is incorrect"):H(""))}))}},"Change Password"),H.length>0?o.a.createElement("span",{className:M.a.passwordError},H):null):null))},Y=a(5),V=a.n(Y),K=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],r=a[1],m=Object(n.useState)(""),u=Object(i.a)(m,2),d=u[0],p=u[1],_=Object(n.useState)({}),f=Object(i.a)(_,2),N=f[0],v=f[1],h=Object(n.useContext)(b),E=h.user,y=(h.setuser,Object(n.useContext)(U)),j=y.users,C=(y.setusers,Object(n.useContext)(x)),w=C.posts,k=C.setposts,S=Object(n.useState)([]),P=Object(i.a)(S,2),B=P[0],R=P[1];return o.a.createElement("header",null,c?o.a.createElement("div",{className:V.a.background},o.a.createElement("div",{className:V.a.postContainer},o.a.createElement("input",{type:"text",onInput:function(e){p(e.target.value)}}),o.a.createElement("input",{type:"file",name:"file",onChange:function(e){v(e.target.files[0])}}),o.a.createElement("div",{className:V.a.btnContainer},o.a.createElement("div",{className:V.a.cancelBtn,onClick:function(){r(!1)}},"Cancel"),o.a.createElement("div",{className:V.a.postBtn,onClick:function(t){t.preventDefault();var a=new FormData;a.append("file",N),O.a.post("http://localhost:8000/upload",a,{}).then((function(e){console.log(e.statusText)}));var n={picture:N.name,caption:d,poster:E.userName,likedBy:[],date:Object(I.constructDate)(),comments:[]},o={query:'mutation {\n        createPost(postInput: {\n          caption: "'.concat(d,'",\n          picture: "').concat(N.name,'",\n          likedBy: [],\n          date: "').concat(Object(I.constructDate)(),'",\n          poster: "').concat(E._id,'"\n          \n        })\n        {\n          _id\n        }\n      }')};g(o).then((function(t){if(t){console.log(t);var a=[n].concat(Object(l.a)(w));r(!1),k(a),e.setposted(a)}}))}},"Post")))):null,o.a.createElement("div",{className:V.a.headerContainer},o.a.createElement(s.b,{to:"/",className:V.a.logo},o.a.createElement("i",{className:"fab fa-2x fa-instagram"}),o.a.createElement("div",{className:V.a.verticalLine}),o.a.createElement("span",{className:V.a.hidden},"Instagram")),o.a.createElement("div",{className:V.a.desktop},o.a.createElement("div",{className:V.a.searchContainer},o.a.createElement("i",{className:"fa fa-search ".concat(V.a.searchIcon," ")}),o.a.createElement("input",{className:V.a.searchBar,placeholder:" Search",onChange:function(e){if(e.target.value){var t=j.filter((function(t){return null===e.target.value?[]:t.userName.toLowerCase().includes(e.target.value.toLowerCase())||t.fullName.toLowerCase().includes(e.target.value.toLowerCase())?t:void 0}));R(t)}else R([])}}),o.a.createElement("ul",{className:"\n                ".concat(B.length>0?V.a.userLinkContainer:V.a.invisible," ").concat(B.length>=5?V.a.overFlow:null)},B.length>0?B.map((function(e,t){return o.a.createElement("li",{className:V.a.userLink,key:t},o.a.createElement(s.b,{to:"/".concat(e.userName)},o.a.createElement("img",{src:"images/avatars/".concat(e.avatar),alt:"",className:V.a.smImg}),o.a.createElement("div",{className:V.a.userInfo},o.a.createElement("div",{className:V.a.nickName},e.fullName),o.a.createElement("div",{className:V.a.realName},e.userName))))})):null))),o.a.createElement("div",{className:V.a.icons},o.a.createElement("span",null,o.a.createElement("i",{className:"fas fa-plus ".concat(V.a.togglePost),onClick:function(){r(!0)}})),o.a.createElement("span",null,o.a.createElement("i",{className:"far fa-compass"})),o.a.createElement("span",null,o.a.createElement("i",{className:"far fa-heart"})),null!==E?o.a.createElement(s.b,{to:"/".concat(E.userName)},o.a.createElement("i",{className:"far fa-user"})):null,o.a.createElement(s.b,{to:"/login",onClick:function(){localStorage.removeItem("token")}},"Logout"))))};var Z=function(){var e=Object(n.useState)({}),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),s=Object(i.a)(r,2),u=s[0],d=s[1],p=Object(n.useState)([]),_=Object(i.a)(p,2),f=_[0],g=_[1],v=Object(n.useState)(""),h=Object(i.a)(v,2),y=h[0],O=h[1],j=Object(n.useMemo)((function(){return{user:a,setuser:c}}),[a,c]),C=Object(n.useMemo)((function(){return{posts:u,setposts:d}}),[u,d]),w=Object(n.useMemo)((function(){return{users:f,setusers:g}}),[f,g]),k=Object(m.f)();return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("token"));if(null!==e){var t={query:'query {\n        user(id: "'.concat(e.userId,'")\n        {\n          _id\n          userName\n           email\n           avatar\n           followedBy\n           following\n           bio\n           gender\n           phoneNumber\n           fullName\n           posts {\n             _id\n             caption\n             picture\n             likedBy\n             date\n            poster {\n              _id\n              userName\n              email\n              avatar\n              phoneNumber\n              gender\n              bio\n              followedBy\n              following\n              fullName\n            }\n            comments {\n              _id\n              caption\n              likedBy\n              date\n              poster {\n                _id\n                userName\n                email\n                avatar\n                phoneNumber\n                gender\n                bio\n                followedBy\n                following\n                fullName\n                \n              }\n              replies {\n                  _id\n                  caption\n                  poster {\n                    _id\n                userName\n                email\n                avatar\n                phoneNumber\n                gender\n                bio\n                followedBy\n                following\n                fullName\n                  }\n                  likedBy\n                  date\n                }\n              \n              \n            }\n           }\n           \n            \n  \n           }\n      }')};fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){if(console.log(e),e.ok)return e.json();console.log("error")})).then((function(e){c(e.data.user);var t=e.data.user;fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify({query:"query {\n              users{\n                _id\n                userName\n                 email\n                 avatar\n                 followedBy\n                 following\n                 bio\n                 gender\n                 phoneNumber\n                 fullName\n                 posts {\n                   _id\n                   caption\n                   picture\n                   likedBy\n                   date\n                  poster {\n                    _id\n                    userName\n                    email\n                    avatar\n                    phoneNumber\n                    gender\n                    bio\n                    followedBy\n                    following\n                    fullName\n                  }\n                  comments {\n                    _id\n                    caption\n                    likedBy\n                    date\n                    poster {\n                      _id\n                      userName\n                      email\n                      avatar\n                      phoneNumber\n                      gender\n                      bio\n                      followedBy\n                      following\n                      fullName\n                      \n                    }\n                    replies {\n                        _id\n                        caption\n                        poster {\n                          _id\n                      userName\n                      email\n                      avatar\n                      phoneNumber\n                      gender\n                      bio\n                      followedBy\n                      following\n                      fullName\n                        }\n                        likedBy\n                        date\n                      }\n                    \n                    \n                  }\n                 }\n                 \n                  \n        \n                 }\n            }"}),headers:{"Content-Type":"application/json"}}).then((function(e){if(console.log(e),e.ok)return e.json();console.log("error")})).then((function(e){if(e){g(e.data.users);Object(l.a)(f);var a=t.posts;e.data.users.map((function(e,n){t.following.includes("".concat(e._id))&&e.posts.length>0&&(a=[].concat(Object(l.a)(a),Object(l.a)(e.posts)))})),d(a)}})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}}),[y]),Object(n.useEffect)((function(){null===JSON.parse(localStorage.getItem("token"))&&"/login"!==window.location.pathname&&"/register"!==window.location.pathname&&(window.location.href="/login")}),[y]),o.a.createElement(m.c,null,o.a.createElement(x.Provider,{value:C},o.a.createElement(b.Provider,{value:j},o.a.createElement(U.Provider,{value:w},"/register"==k.pathname||"/login"==k.pathname?null:o.a.createElement(K,{setposted:O}),o.a.createElement(m.a,{path:"/login",component:E,exact:!0,label:"Login"}),o.a.createElement(m.a,{path:"/register",component:N,exact:!0,label:"Register"}),o.a.createElement(m.a,{path:"/",render:function(){return o.a.createElement(L,{users:f,setusers:g,posts:u,setposts:d,posted:y,setposted:O})},exact:!0,label:"Feed"}),f.map((function(e,t){return o.a.createElement(m.a,{key:t,path:"/".concat(e.userName),render:function(){return o.a.createElement(q,{profileUser:e,users:f,profileIndex:t,setusers:g,posts:u,setposts:d,setposted:O})},exact:!0,label:"Profile"})})),o.a.createElement(m.a,{path:"/AccountSettings",render:function(){return o.a.createElement(G,{users:f,setusers:g,setposted:O})},exact:!0,label:"settings"})))))};r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(s.a,null,o.a.createElement(Z,null))),document.getElementById("root"))},9:function(e,t,a){e.exports={bold:"Reply_bold__1L34U",comments:"Reply_comments__vAh_w",commDiv:"Reply_commDiv__buffY",commLikes:"Reply_commLikes__3UN15",smImg:"Reply_smImg__3ScYq",flex:"Reply_flex__Ukb_d",replyBtn:"Reply_replyBtn__3Ph2B",inputAComment:"Reply_inputAComment__3GksM",line:"Reply_line__1awdM",line2:"Reply_line2__2Teav",container:"Reply_container__22_f9",btnGrp:"Reply_btnGrp__17MGN",postCancelBtn:"Reply_postCancelBtn__1aTy5",postReplyBtn:"Reply_postReplyBtn__1GRhY"}}},[[43,1,2]]]);
//# sourceMappingURL=main.11b3ecb2.chunk.js.map